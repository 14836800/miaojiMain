webpackJsonp([11],{456:function(e,t,n){n(661);var o=n(0)(n(608),n(702),"data-v-e2f048fe",null);o.options.__file="E:\\MJWechatApp\\code\\src\\views\\OfficeLocation.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] OfficeLocation.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},576:function(e,t,n){e.exports=n.p+"static/img/officedefault.ef70d8f.jpg"},608:function(e,t,n){"use strict";function o(e,t,n){var o="";t.plugin("AMap.Geolocation",function(){var a=new window.AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0,noIpLocate:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new window.AMap.Pixel(10,20),showMarker:!1,showCircle:!0,panToLocation:!0,zoomToAccuracy:!1,GeoLocationFirst:!0});t.addControl(a),a.getCurrentPosition(),window.AMap.event.addListener(a,"complete",function(a){o=a.position,new window.AMap.Marker({icon:"http://cms.mingz-tech.com/cdn/marker_19x23.png",title:"我的位置",position:[o.lng,o.lat]}).setMap(t),n.clear(),n.search(new window.AMap.LngLat(o.getLng(),o.getLat()),new window.AMap.LngLat(e[0],e[1]))}),window.AMap.event.addListener(a,"error",function(){console.log("定位失败"),alert("定位失败!")})})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),i=n.n(a),r=n(5),s=n.n(r),c=n(9),d=n(576),p=n.n(d),l=function(e){var t=e.position,n=e.info,a=e.error,i=e.brand,r=new window.AMap.Map("iCenter",{resizeEnable:!0,zoom:13,center:t});window.AMapUI.loadUI(["overlay/SimpleInfoWindow"],function(e){function s(){u.open(r,d.getPosition())}function c(){u.close(r,d.getPosition())}var d=new window.AMap.Marker({map:r,zIndex:9999999,position:t,draggable:!1}),l='<div class="officeimg"><img src="'+p.a+'"></div>',u=new e({infoTitle:'<span>"妙寄"全网站点: '+n.name+"</strong>",infoBody:l+'<div class="office-detail"><div class="first-line"><button type="" class="navigation-btn">导航</button><p class="office-detail__more">详细<span class="more"><span></span></span></p></div><div class="office-detail__content contenthide"><p>所在区域: '+n.address+"</p><p>详细地址: "+n.descript+'</p><p>电话号码: <a href="tel:'+n.mobile+'">'+n.mobile+"</a></p></p>"+i+"</div></div>"+a,offset:new window.AMap.Pixel(0,-31)});window.AMap.event.addListener(d,"click",function(){s()}),s();var f=new window.AMap.Walking({map:r,panel:"panel"});setTimeout(function(){window.document.getElementsByClassName("navigation-btn")[0].addEventListener("touchstart",function(e){e.stopPropagation(),c(),o(t,r,f)},!0);var e=window.document.getElementsByClassName("office-detail__more")[0],n=window.document.getElementsByClassName("more")[0],a=window.document.getElementsByClassName("office-detail__content")[0];e.addEventListener("touchstart",function(e){e.stopPropagation();var t=n.className,o=a.className,i=/upside/g;i.test(t)?(n.className=t.replace(i,""),a.className+=" contenthide"):(n.className+=" upside",a.className=o.replace("contenthide",""))},!0)},600)})};t.default={name:"send",components:{},created:function(){},mounted:function(){var e=this;return s()(i.a.mark(function t(){var n,o,a,r,s,d,p,u,f,m,w,v,h;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.document.title='"妙寄"站点地图',n=e.$route.query.userId){t.next=5;break}return e.$vux.toast.show({text:"缺少关键数据， 无法查询站点地址",type:"warn",width:"26rem"}),t.abrupt("return");case 5:return t.prev=5,t.next=8,e.$http({method:"post",url:c.e.officelocation,params:{userId:n}});case 8:if(o=t.sent,200!==o.status){t.next=31;break}return a=o.data,e.province=a.province,e.city=a.city,e.district=a.district,e.longitude=a.longitude,e.latitude=a.latitude,e.descript=a.descript,e.name=a.name,e.address=a.province+a.city+"市"+a.district,r=[e.longitude||121.345506,e.latitude||31.222795],s={name:e.name,address:e.address,descript:e.descript,mobile:a.mobile},d="</br>",e.longitude||e.latitude||(d='</br><p>定位失败，为您定位到<a href="http://www.mijihome.cn/phone/index.html#/index">上海圈嘀科技公司</a></p>'),t.next=25,e.$http({method:"get",url:c.a.index,params:{id:n}});case 25:if(p=t.sent,u="",200!==p.status)u="";else{for(f=p.data,m=[],w=0,v=f.length;w<v;w++)h=f[w],m.push(h.brand);u='<p class="pull-brand">接入品牌: '+m+"</p>"}l({position:r,info:s,error:d,brand:u}),t.next=33;break;case 31:return e.$vux.toast.show({text:"获取站点信息失败",type:"warn",width:"26rem"}),t.abrupt("return");case 33:t.next=39;break;case 35:t.prev=35,t.t0=t.catch(5),console.error(t.t0),e.$vux.toast.show({text:"无法获取站点信息, 网络请求错误",type:"warn",width:"25rem"});case 39:case"end":return t.stop()}},t,e,[[5,35]])}))()},computed:{},data:function(){return{addressId:"",address:"",city:"",descript:"",district:"",latitude:0,longitude:0,name:"",province:""}},methods:{}}},640:function(e,t,n){t=e.exports=n(171)(),t.push([e.i,"",""])},661:function(e,t,n){var o=n(640);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(447)("4df3a3ae",o,!1)},702:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map"},[n("div",{staticStyle:{height:"100vh"},attrs:{id:"iCenter"}}),e._v(" "),n("div",{attrs:{id:"panel"}})])}]},e.exports.render._withStripped=!0}});